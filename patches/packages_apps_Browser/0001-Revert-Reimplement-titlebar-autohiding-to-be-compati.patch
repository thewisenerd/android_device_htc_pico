From a2753f06c54e6a27a1cbb1b6479a1fbe18121638 Mon Sep 17 00:00:00 2001
From: Vineeth Raj <contact.twn@openmailbox.org>
Date: Sun, 28 Sep 2014 14:27:46 +0530
Subject: [PATCH] Revert "Reimplement titlebar autohiding to be compatible with
 chromium webview."

This reverts commit 1d379d38962ea0c00e4718cdd753806f2a6e0a60.
---
 src/com/android/browser/TitleBar.java | 22 +++++++---------------
 1 file changed, 7 insertions(+), 15 deletions(-)

diff --git a/src/com/android/browser/TitleBar.java b/src/com/android/browser/TitleBar.java
index e200ce8..a9ee40d 100644
--- a/src/com/android/browser/TitleBar.java
+++ b/src/com/android/browser/TitleBar.java
@@ -56,7 +56,6 @@ public class TitleBar extends RelativeLayout {
 
     //state
     private boolean mShowing;
-    private boolean mHideLoad;
     private boolean mInLoad;
     private boolean mSkipTitleBarAnimations;
     private Animator mTitleBarAnimator;
@@ -109,13 +108,10 @@ public class TitleBar extends RelativeLayout {
     }
 
     private void setFixedTitleBar() {
-        boolean isFixed = !mUseQuickControls
-                && !mContext.getResources().getBoolean(R.bool.hide_title);
-        isFixed |= mAccessibilityManager.isEnabled();
         // If getParent() returns null, we are initializing
         ViewGroup parent = (ViewGroup)getParent();
-        if (mIsFixedTitleBar == isFixed && parent != null) return;
-        mIsFixedTitleBar = isFixed;
+        if (mIsFixedTitleBar && parent != null) return;
+        mIsFixedTitleBar = true;
         setSkipTitleBarAnimations(true);
         show();
         setSkipTitleBarAnimations(false);
@@ -258,12 +254,13 @@ public class TitleBar extends RelativeLayout {
             mProgress.setProgress(PageProgressView.MAX_PROGRESS);
             mProgress.setVisibility(View.GONE);
             mInLoad = false;
-            mHideLoad=false;
             mNavBar.onProgressStopped();
             // check if needs to be hidden
             if (!isEditingUrl() && !wantsToBeVisible()) {
                 if (mUseQuickControls) {
                     hide();
+                } else {
+                    mBaseUi.showTitleBarForDuration();
                 }
             }
         } else {
@@ -274,16 +271,15 @@ public class TitleBar extends RelativeLayout {
             }
             mProgress.setProgress(newProgress * PageProgressView.MAX_PROGRESS
                     / PROGRESS_MAX);
-            if (!isHideLoad() && !mUseQuickControls) {
-                hide();
-                mHideLoad=true;
-            }
             if (mUseQuickControls && !isEditingUrl()) {
                 setShowProgressOnly(true);
                 if (!mShowing) {
                     show();
                 }
             }
+            if (!mShowing) {
+                show();
+            }
         }
     }
 
@@ -389,10 +385,6 @@ public class TitleBar extends RelativeLayout {
         return mUseQuickControls;
     }
 
-    public boolean isHideLoad() {
-        return mHideLoad;
-    }
-
     public boolean isInLoad() {
         return mInLoad;
     }
-- 
1.9.1

